/*

A JavaScript plugin that adds a div based RPG style dialogue system. Which includes animation, audio, images and function call logic.
Originally made for SpiritAxolotl's birthday.

Version : 2.1.1f

By CalmBubbles :)

*/


window.addEventListener("load",(()=>{DialogueLoop.Init()}));class DialoguePortraitPosition{static get Left(){return 0}static get Right(){return 1}}class DialogueDirectoryType{static get Root(){return 0}static get Same(){return 1}}class DialogueEvent{static get None(){return 0}static get Load(){return 1}static get Enable(){return 2}static get Disable(){return 3}static get TypingEnter(){return 4}static get TypingExit(){return 5}static get PortraitEnable(){return 6}static get LineClear(){return 7}static get Clear(){return 8}}class DialogueSystem{static experimental=!1}class NamedItem{name=""}class NamedArray{items=[];Find(t){return this.items.find((i=>i.name===t))}}class Property extends NamedItem{value=null;constructor(t,i){super(),this.name=t??"Unnamed",this.value=i}}class DialogueLoop{static#t=!1;static#i=0;static#e=0;static#a=0;static#n=0;static#s=0;static#o=[];static targetFrameRate=-1;static vSyncCount=1;static timeScale=1;static maximumDeltaTime=.1111111;static get frameCount(){return this.#i}static get unscaledTime(){return this.#e}static get unscaledDeltaTime(){return this.#a}static get time(){return this.#n}static get deltaTime(){return this.#s}static#r(){0===this.targetFrameRate||1===this.vSyncCount?requestAnimationFrame(this.#l.bind(this)):2===this.vSyncCount?requestAnimationFrame((()=>requestAnimationFrame(this.#l.bind(this)))):setTimeout(this.#l.bind(this),0)}static#h(){this.#a=.001*performance.now()-this.#e,this.#e+=this.#a;let t=this.#a;t>this.maximumDeltaTime&&(t=this.maximumDeltaTime),this.#s=t*this.timeScale,this.#n+=this.#s,this.#d(),0!==this.timeScale&&this.#i++}static#l(){if(this.targetFrameRate>0&&0===this.vSyncCount){const t=1/this.targetFrameRate-.005;let i=.001*performance.now()-this.#e;for(;i>=t;)this.#h(),i-=t}else this.#h();this.#r()}static#d(){for(let t=0;t<this.#o.length;t++){const i=this.#o[t];i.time+=this.#s,i.time<=i.timeout||(i.callback(),i.clear()?this.#o.splice(this.#o.indexOf(i),1):i.time=0)}}static Init(){this.#t||(this.#t=!0,this.#r())}static Append(t,i,e){this.#o.push({callback:t,clear:e??(()=>!1),timeout:i??0,time:0})}static async Delay(t){if(0===t)return;let i=!1;return new Promise((e=>this.Append((()=>{i=!0,e()}),t,(()=>i))))}}class DialogueManager{#t=!1;#c=!1;#u=!1;#m=!1;#g=!1;#p=0;#f=0;#x=0;#y=0;#D=[];#w=[0,0,0];#S=null;#b=null;#v=null;#A=null;waitDisableClear=!0;soundInterval=3;portraitPosition=0;characters=[];config=new DialogueManagerConfig;style=new DialogueStyle;audioSource=new DialogueAudioSource;animation=new DialogueAnimationConfig;get isLoaded(){return this.#t}get isActive(){return this.#c}get isInUse(){return this.#u}get portraitEnabled(){return this.#m}get currentEvent(){return this.#p}get charCount(){return this.#f}get wordCount(){return this.#y}get dialogueBox(){return this.#S}get dialoguePortrait(){return this.#b}get dialogueLine(){return this.#v}constructor(t){this.#S=t,this.#S.setAttribute("data-enabled","false"),this.#S.setAttribute("data-portrait-enabled","false"),this.#S.classList.add("dialogue-box"),null!=this.#b&&this.#b.remove(),null!=this.#v&&this.#v.remove(),this.#b=document.createElement("img"),this.#v=document.createElement("div"),this.#b.style.display="none",this.#b.style.visibility="hidden",this.#v.style.display="inline-block",this.#b.classList.add("dialogue-portrait"),this.#v.classList.add("dialogue-line"),this.#S.append(this.#b,this.#v),this.#C()}#l(){if(this.#c)for(let t=0;t<3;t++)for(let i=0;i<this.#f;i++){if(!this.characters[i].isEnabled||null==this.characters[i].animations[t]){i===this.#f-1&&this.#w[t]++;continue}if((!this.characters[i].animations[t].hasEnded||this.characters[i].animations[t].loop&&this.characters[i].animations[t].loopCount<=this.#w[t])&&(this.characters[i].animations[t].Animate(),this.characters[i].animations[t].wait&&0!==t&&!this.#g))break;i===this.#f-1&&this.#w[t]++}}#T(t,i,e){if(![1,2,3,4,5,6,7,8].includes(t))return;const a=this.#D.find((a=>a.event===t&&a.callback===i&&a.recallable===e));if(null==a)return void this.#D.push({event:t,callback:i,recallable:e});const n=this.#D.indexOf(a);this.#D.splice(n,1)}#L(t){this.#p=t;const i=this.#D.filter((i=>i.event===t));for(let t=0;t<i.length;t++)i[t].callback(),i[t].recallable||this.#D.splice(this.#D.indexOf(i[t]),1);this.#p=0}Finish(){this.#t&&!this.#g&&(this.#g=!0)}BreakLine(t){if(this.#t&&this.#c&&!this.#u)for(let i=0;i<(t??1);i++){const t=document.createElement("br");t.classList.add("dialogue-line-level"),this.#v.append(t)}}On(t,i){this.#T(t,i,!0)}Once(t,i){this.#T(t,i,!1)}UpdateSpaces(){this.#t&&this.#c&&requestAnimationFrame((()=>{const t=this.#v.querySelectorAll(".dialogue-line-level"),i=this.#v.getBoundingClientRect().width;let e=0;for(let a=0;a<t.length;a++)"BR"!==t[a].tagName?(t[a].style.display="inline-block",e+=t[a].getBoundingClientRect().width,e<=i||(" "===t[a].textContent?(e=0,t[a].style.display="none"):e=t[a].getBoundingClientRect().width)):e=0}))}async#k(t){if(0===t)return;let i=0;return new Promise((e=>DialogueLoop.Append((()=>{i+=DialogueLoop.deltaTime,(i>t||this.#g)&&e()}),0,(()=>i>t||this.#g))))}async#C(){await new Promise((t=>DialogueLoop.Append((()=>{for(let t=0;t<this.config.audios.items.length;t++)if(!this.config.audios.items[t].isLoaded)return;for(let t=0;t<this.config.sprites.items.length;t++)if(!this.config.sprites.items[t].isLoaded)return;this.#t=!0,t()}),0,(()=>this.#t)))),DialogueLoop.Append((()=>this.#l())),await new Promise((t=>requestAnimationFrame(t))),this.#L(1)}async#P(){const t=this.animation.text.onAppend;let i=0;for(;this.#x<this.characters.length;){const e=this.characters[this.#x];if(e.Enable(),null!=e.audio&&(i++,i>=this.soundInterval)){const t=this.config.audios.Find(e.audio);this.audioSource.Play(t),i=0}if(!this.#g&&(await this.#k(e.delay),null!=t.animation&&t.wait)){let t=!1;await new Promise((i=>DialogueLoop.Append((()=>{(this.characters[this.#x].animations[0].hasEnded||this.#g)&&(t=!0,i())}),0,(()=>t))))}this.#x++}if(null==t.animation||t.wait||this.#g)return;let e=!1;await new Promise((t=>DialogueLoop.Append((()=>{(this.characters[this.characters.length-1].animations[0].hasEnded||this.#g)&&(e=!0,t())}),0,(()=>e))))}async#I(){if(0===this.#f)return;const t=this.animation.text.onClear;if(null!=t.animation){for(let i=0;i<this.characters.length;i++){const e=Reflect.construct(this.config.animations.Find(t.animation).constructor,[]);e.Set(i,this.characters[i],2,this.#w[2],t.animationParams),e.loop=!1,e.wait=t.wait,e.duration=t.duration}let i=!1;await new Promise((t=>DialogueLoop.Append((()=>{(this.characters[this.characters.length-1].animations[2].hasEnded||this.#g)&&(i=!0,t())}),0,(()=>i))))}}async#E(){const t=this.#v.querySelectorAll(".dialogue-line-level");if(0===t.length&&!this.#m||!this.#t||!this.#c)return;this.#g||await this.#I();let i=!1,e=null;!this.#g&&this.#m||(e=this.animation.portrait.onDisable,this.animation.portrait.onDisable=new DialogueAnimation);let a=()=>{};const n=new Promise((t=>a=()=>t()));await this.animation.portrait.onDisable.Animate(this.#b,(()=>{const t=""!==this.animation.portrait.onDisable.animation;t&&(this.#b.style.visibility="hidden"),DialogueLoop.Append((()=>{i&&(t||(this.#b.style.visibility="hidden"),this.#b.style.display="none",this.#S.setAttribute("data-portrait-enabled","false"),this.#m=!1,a())}),0,(()=>i))})),null!=e&&(this.animation.portrait.onDisable=e),this.#g||await this.animation.lineClear.Animate(this.#v,null,(t=>this.#k(t))),this.#v.style.visibility="hidden",i=!0,await n;for(let i=0;i<t.length;i++)t[i].remove();this.#v.style.visibility="visible",this.#f=0,this.#x=0,this.#y=0,this.characters=[],this.#w=[0,0,0],this.#A=null}async SetActive(t){if(t!=this.#c&&this.#t&&!this.#u){if(this.#u=!0,t)return this.#S.setAttribute("data-enabled","true"),this.#g||await this.animation.box.onEnable.Animate(this.#S,null,(t=>this.#k(t))),this.#c=!0,this.#u=!1,this.#g=!1,void this.#L(2);this.waitDisableClear?await this.#E(!0):this.#E(!0),this.#L(7),this.#L(8),this.#g||await this.animation.box.onDisable.Animate(this.#S,null,(t=>this.#k(t))),this.#S.setAttribute("data-enabled","false"),this.#c=!1,this.#u=!1,this.#g=!1,this.#L(3)}}async Type(t,i,e){if(!this.#t||!this.#c||this.#u)return;this.#u=!0,null==e&&(e=new DialogueData);const a=null!=e.portrait&&e.portrait!==this.#A;if(a&&(this.#A=e.portrait,!this.#m)){const t=this.config.sprites.Find(this.#A);this.#b.src=t.spriteURL,await new Promise((t=>this.#b.onload=t)),this.#b.onload=()=>{},this.#S.setAttribute("data-portrait-enabled","true"),this.#b.style.display="inline-block";let i="";switch(this.portraitPosition){case 0:i="left";break;case 1:i="right"}this.#b.style.float=i}const n=1/60/i-4e-4,s=e??new DialogueData,o=this.style.Create(s.style);let r=null;for(let i=0;i<t.length;i++){const e=document.createElement("\n"===t[i]?"br":"span");"\n"!==t[i]&&(e.style.backdropFilter=o.backdropFilter,e.style.background=o.background,e.style.bottom=o.bottom,e.style.color=o.color,e.style.fontFamily=o.fontFamily,e.style.fontFeatureSettings=o.fontFeatureSettings,e.style.fontKerning=o.fontKerning,e.style.fontSize=o.fontSize,e.style.fontSizeAdjust=o.fontSizeAdjust,e.style.fontStretch=o.fontStretch,e.style.fontStyle=o.fontStyle,e.style.fontVariant=o.fontVariant,e.style.fontVariantCaps=o.fontVariantCaps,e.style.fontWeight=o.fontWeight,e.style.left=o.left,e.style.letterSpacing=o.letterSpacing,e.style.right=o.right,e.style.textDecoration=o.textDecoration,""!=o.textDecorationColor&&null!=o.textDecorationColor&&(e.style.textDecorationColor=o.textDecorationColor),""!=o.textDecorationLine&&null!=o.textDecorationLine&&(e.style.textDecorationLine=o.textDecorationLine),""!=o.textDecorationStyle&&null!=o.textDecorationStyle&&(e.style.textDecorationStyle=o.textDecorationStyle),""!=o.textDecorationThickness&&null!=o.textDecorationThickness&&(e.style.textDecorationThickness=o.textDecorationThickness),e.style.textEmphasis=o.textEmphasis,e.style.textShadow=o.textShadow,e.style.textTransform=o.textTransform,e.style.transform=o.transform,e.style.transition=o.transition,e.style.top=o.top,e.style.verticalAlign=o.verticalAlign,e.style.writingMode=o.writingMode,e.style.zIndex=o.zIndex," "==t[i]&&"inherit"!=o.wordSpacing&&(e.style.width=o.wordSpacing),e.style.display="inline-block",e.style.position="relative",e.style.textAlign="center",e.style.visibility="hidden",e.style.whiteSpace="pre-wrap",e.append(t[i])),e.classList.add("dialogue-char",`dialogue-char-${this.#f}`)," "!==t[i]&&"\n"!==t[i]&&(null==r&&(r=document.createElement("span"),r.style.display="inline-block",r.classList.add("dialogue-word",`dialogue-word-${this.#y}`,"dialogue-line-level")),r.append(e))," "!==t[i]&&"\n"!==t[i]&&i!==t.length-1||(null!=r&&(this.#v.append(r),r=null,this.#y++)," "!==t[i]&&"\n"!==t[i]||(e.classList.add("dialogue-line-level"),this.#v.append(e)));const a=new DialogueChar(e,n,s.audio),l=this.animation.text.onAppend;if(null!=l.animation){const t=Reflect.construct(this.config.animations.Find(l.animation).constructor,[]);t.Set(i,a,0,this.#w[0],l.animationParams),t.loop=!1,t.wait=l.wait,t.duration=l.duration}if(null!=s.animation){const t=this.config.animations.Find(s.animation),e=Reflect.construct(t.constructor,[]);e.Set(i,a,1,this.#w[1],s.animationParams),e.loop=t.loop,e.wait=t.wait,e.duration=t.duration}this.characters.push(a),this.#f++}this.UpdateSpaces(),this.#L(4),this.#g||await this.#k(s.delayBefore);const l=this.config.sprites.Find(this.#A);!this.#m&&a?(this.#b.src=l.spriteURL,await new Promise((t=>this.#b.onload=t)),this.#b.onload=()=>{},this.#b.style.visibility="visible",this.#g||await this.animation.portrait.onEnable.Animate(this.#b,null,(t=>this.#k(t))),this.#m=!0,this.#L(6)):a&&(this.#b.src=l.spriteURL),await this.#P(),this.#g||await this.#k(s.delayAfter),this.#L(5),this.#u=!1,this.#g=!1}async ClearText(){const t=this.#v.querySelectorAll(".dialogue-line-level");if(0!==t.length&&this.#t&&!this.#u&&this.#c){this.#u=!0,this.#g||(await this.#I(),await this.animation.lineClear.Animate(this.#v,null,(t=>this.#k(t)))),this.#v.style.visibility="hidden";for(let i=0;i<t.length;i++)t[i].remove();this.#v.style.visibility="visible",this.#f=0,this.#x=0,this.#y=0,this.characters=[],this.#w=[0,0,0],this.#u=!1,this.#g=!1,this.#L(7)}}async Clear(){this.#u||(this.#u=!0,await this.#E(!1),this.#u=!1,this.#g=!1,this.#L(7),this.#L(8))}}class DialogueManagerConfig{animations=new NamedArray;audios=new NamedArray;sprites=new NamedArray;constructor(){this.animations.items.push(new DialogueTextCSSAnimation)}}class DialogueData{delayBefore=0;delayAfter=0;animationParams=[];animation=null;style=null;audio=null;portrait=null;constructor(t){const i=t??{};this.delayBefore=i.delayBefore??0,this.delayAfter=i.delayAfter??0,this.animationParams=i.animationParams??[],this.animation=i.animation,this.style=i.style??new DialogueStyle,this.audio=i.audio,this.portrait=i.portrait}}class DialogueChar{#F=!1;#n=0;#U=null;animations=[null,null,null];audio=null;get isEnabled(){return this.#F}get delay(){return this.#n}get target(){return this.#U}get style(){return this.#U.style}set style(t){this.#U.style=t}constructor(t,i,e){this.#U=t,this.#n=i,this.audio=e}Enable(){this.#F||(this.#F=!0,this.#U.style.visibility="visible")}}class DialogueStyle{backdropFilter=null;background=null;bottom=null;color=null;fontFamily=null;fontFeatureSettings=null;fontKerning=null;fontSize=null;fontSizeAdjust=null;fontStretch=null;fontStyle=null;fontVariant=null;fontVariantCaps=null;fontWeight=null;left=null;letterSpacing=null;right=null;textDecoration=null;textDecorationColor=null;textDecorationLine=null;textDecorationStyle=null;textDecorationThickness=null;textEmphasis=null;textShadow=null;textTransform=null;transform=null;transition=null;top=null;verticalAlign=null;writingMode=null;wordSpacing=null;zIndex=null;constructor(t){this.Set(t??{})}Set(t){this.backdropFilter=t.backdropFilter,this.background=t.background,this.bottom=t.bottom,this.color=t.color,this.fontFamily=t.fontFamily,this.fontFeatureSettings=t.fontFeatureSettings,this.fontKerning=t.fontKerning,this.fontSize=t.fontSize,this.fontSizeAdjust=t.fontSizeAdjust,this.fontStretch=t.fontStretch,this.fontStyle=t.fontStyle,this.fontVariant=t.fontVariant,this.fontVariantCaps=t.fontVariantCaps,this.fontWeight=t.fontWeight,this.left=t.left,this.letterSpacing=t.letterSpacing,this.right=t.right,this.textDecoration=t.textDecoration,this.textDecorationColor=t.textDecorationColor,this.textDecorationLine=t.textDecorationLine,this.textDecorationStyle=t.textDecorationStyle,this.textDecorationThickness=t.textDecorationThickness,this.textEmphasis=t.textEmphasis,this.textShadow=t.textShadow,this.textTransform=t.textTransform,this.transform=t.transform,this.transition=t.transition,this.top=t.top,this.verticalAlign=t.verticalAlign,this.writingMode=t.writingMode,this.wordSpacing=t.wordSpacing,this.zIndex=t.zIndex}Create(...t){let i=this;for(let e=0;e<t.length;e++)i=new DialogueStyle({backdropFilter:t[e].backdropFilter??i.backdropFilter??"",background:t[e].background??i.background??"",bottom:t[e].bottom??i.bottom??"",color:t[e].color??i.color??"",fontFamily:t[e].fontFamily??i.fontFamily??"",fontFeatureSettings:t[e].fontFeatureSettings??i.fontFeatureSettings??"",fontKerning:t[e].fontKerning??i.fontKerning??"",fontSize:t[e].fontSize??i.fontSize??"",fontSizeAdjust:t[e].fontSizeAdjust??i.fontSizeAdjust??"",fontStretch:t[e].fontStretch??i.fontStretch??"",fontStyle:t[e].fontStyle??i.fontStyle??"",fontVariant:t[e].fontVariant??i.fontVariant??"",fontVariantCaps:t[e].fontVariantCaps??i.fontVariantCaps??"",fontWeight:t[e].fontWeight??i.fontWeight??"",left:t[e].left??i.left??"",letterSpacing:t[e].letterSpacing??i.letterSpacing??"",right:t[e].right??i.right??"",textDecoration:t[e].textDecoration??i.textDecoration??"",textDecorationColor:t[e].textDecorationColor??i.textDecorationColor??"",textDecorationLine:t[e].textDecorationLine??i.textDecorationLine??"",textDecorationStyle:t[e].textDecorationStyle??i.textDecorationStyle??"",textDecorationThickness:t[e].textDecorationThickness??i.textDecorationThickness??"",textEmphasis:t[e].textEmphasis??i.textEmphasis??"",textShadow:t[e].textShadow??i.textShadow??"",textTransform:t[e].textTransform??i.textTransform??"",transform:t[e].transform??i.transform??"",transition:t[e].transition??i.transition??"",top:t[e].top??i.top??"",verticalAlign:t[e].verticalAlign??i.verticalAlign??"",writingMode:t[e].writingMode??i.writingMode??"",wordSpacing:t[e].wordSpacing??i.wordSpacing??"",zIndex:t[e].zIndex??i.zIndex??""});return i}}class DialogueTextAnimation extends NamedItem{#B=!1;#R=!1;#z=0;#n=0;#N=0;#U=null;loop=!0;wait=!1;duration=0;get hasEnded(){return this.#R}get index(){return this.#z}get time(){return this.#n}get loopCount(){return this.#N}get dialogueChar(){return this.#U}Set(t,i,e,a,n){this.#z=t,this.#U=i,this.#N=a,this.#U.animations[e]=this;const s=new NamedArray;s.items=n,this.OnSet(s)}Animate(){this.#R&&!this.loop||(this.#B||(this.#B=!0,this.#R=!1),this.#n>=this.duration&&(this.#R||(this.#R=!0,this.OnEnd(),this.loop&&(this.#B=!1,this.#n=0,this.#N++)),!this.loop)||(this.Update(),this.#n+=DialogueLoop.deltaTime))}OnSet(t){}Update(){}OnEnd(){}}class DialogueTextCSSAnimation extends DialogueTextAnimation{#c=!1;#V="";name="css";OnSet(t){this.#V=t.Find("animation").value??""}Update(){this.#c||(this.#c=!0,this.dialogueChar.style.animation=this.#V)}OnEnd(){this.#c&&!this.loop&&(this.#c=!1,this.dialogueChar.style.animation="")}}class DialogueResource extends NamedItem{src="";constructor(t,i){super(),this.name=t,this.src=i}}class DialogueDirectory{static GetCurrentPath(){const t=window.location.toString().split("/");let i="";for(let e=0;e<t.length-1;e++)i+=t[e],e<t.length-2&&(i+="/");return i}}class DialogueAudioClip extends DialogueResource{#t=!1;#O=null;get isLoaded(){return this.#t}get audioBuffer(){return this.#O}constructor(t,i){super(t,i),this.#C()}async#C(){const t=await fetch(this.src),i=await t.arrayBuffer();this.#O=await DialogueAudioSource.global.audioContext.decodeAudioData(i),this.#t=!0}}class DialogueAudioSource{static#q=new DialogueAudioSource;static get global(){return this.#q}#M=1;#j=null;#K=null;get volume(){return this.#K.gain.value}set volume(t){this.#K.gain.value=t}get pitch(){return this.#M}set pitch(t){this.#M=t}get audioContext(){return this.#j}constructor(){this.#j=new AudioContext,this.#K=this.#j.createGain(),this.#K.connect(this.#j.destination)}Play(t){if(!t.isLoaded)return;const i=this.#j.createBufferSource();i.buffer=t.audioBuffer,i.connect(this.#K),i.playbackRate.value=this.pitch,i.start()}}class DialogueAudioArray extends NamedArray{constructor(t,i){super();let e=i??0;switch(e){case 0:e="";break;case 1:e=DialogueDirectory.GetCurrentPath()}let a=[];for(let i=0;i<t.length;i++)a.push(new DialogueAudioClip(t[i].name,`${e}/${t[i].src}`));this.items=a}}class DialogueSprite extends DialogueResource{#t=!1;#W="";get isLoaded(){return this.#t}get spriteURL(){return this.#W}constructor(t,i){super(t,i),this.#C()}async#C(){const t=await fetch(this.src),i=await t.blob();this.#W=await URL.createObjectURL(i),this.#t=!0}}class DialogueSpriteArray extends NamedArray{constructor(t,i){super();let e=i??0;switch(e){case 0:e="";break;case 1:e=DialogueDirectory.GetCurrentPath()}let a=[];for(let i=0;i<t.length;i++)a.push(new DialogueSprite(t[i].name,`${e}/${t[i].src}`));this.items=a}}class DialogueAnimationPreset{wait=!0;duration=0;animationParams=[];callback=()=>{};animation=null;constructor(t){const i=t??{};this.wait=i.wait??!0,this.duration=i.duration??0,this.animationParams=i.animationParams??[],this.callback=i.callback??(()=>{}),this.animation=i.animation}}class DialogueAnimation extends DialogueAnimationPreset{constructor(t){super(t),null==this.animation&&(this.animation="")}async#d(t,i,e){t.style.animation=this.animation,t.style.animationDuration=this.duration/DialogueLoop.timeScale+"s",await e(this.duration),t.style.animation="",t.style.animationDuration="",i(),this.callback()}async Animate(t,i,e){null==i&&(i=()=>{}),null==e&&(e=t=>DialogueLoop.Delay(t)),this.wait?await this.#d(t,i,e):this.#d(t,i,e)}}class DialogueBoxNPortraitAnimationData{onEnable=new DialogueAnimation;onDisable=new DialogueAnimation}class DialogueTextAnimationData{onAppend=new DialogueAnimationPreset;onClear=new DialogueAnimationPreset}class DialogueAnimationConfig{box=new DialogueBoxNPortraitAnimationData;portrait=new DialogueBoxNPortraitAnimationData;lineClear=new DialogueAnimation;text=new DialogueTextAnimationData}